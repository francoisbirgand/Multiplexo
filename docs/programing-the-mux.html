<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Programing the MUX | User Guide for the MUX</title>
  <meta name="description" content="This is a user guide to use the Multiplexed, Multipoint Sampler system called MUX" />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Programing the MUX | User Guide for the MUX" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a user guide to use the Multiplexed, Multipoint Sampler system called MUX" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Programing the MUX | User Guide for the MUX" />
  
  <meta name="twitter:description" content="This is a user guide to use the Multiplexed, Multipoint Sampler system called MUX" />
  

<meta name="author" content="MultiplexÔ" />


<meta name="date" content="2020-01-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="the-mux-sensor-functioning.html">
<link rel="next" href="the-files-saved-on-the-sd-card.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">User Guide for the MUX from MultiplexÔ</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Reasons for the MUX</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#the-versions-available"><i class="fa fa-check"></i><b>1.1</b> The versions available</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#downloads"><i class="fa fa-check"></i><b>1.2</b> Downloads</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> How to hook things together</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#the-different-parts"><i class="fa fa-check"></i><b>2.1</b> The different parts</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#connecting-with-the-connect-box"><i class="fa fa-check"></i><b>2.2</b> Connecting with the Con::nect Box</a><ul>
<li class="chapter" data-level="2.2.1" data-path="intro.html"><a href="intro.html#powering-the-connect-box"><i class="fa fa-check"></i><b>2.2.1</b> Powering the Con::nect Box</a></li>
<li class="chapter" data-level="2.2.2" data-path="intro.html"><a href="intro.html#powering-the-mux"><i class="fa fa-check"></i><b>2.2.2</b> Powering the MUX</a></li>
<li class="chapter" data-level="2.2.3" data-path="intro.html"><a href="intro.html#connections-to-trigger-the-mux"><i class="fa fa-check"></i><b>2.2.3</b> Connections to Trigger the MUX</a></li>
<li class="chapter" data-level="2.2.4" data-path="intro.html"><a href="intro.html#communications-between-the-mux-and-the-spectrolyser"><i class="fa fa-check"></i><b>2.2.4</b> Communications between the MUX and the Spectro::lyser</a></li>
<li class="chapter" data-level="2.2.5" data-path="intro.html"><a href="intro.html#the-mux-external-plugs"><i class="fa fa-check"></i><b>2.2.5</b> The MUX external plugs</a></li>
<li class="chapter" data-level="2.2.6" data-path="intro.html"><a href="intro.html#control-box-plugs"><i class="fa fa-check"></i><b>2.2.6</b> Control box plugs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="the-mux-sensor-functioning.html"><a href="the-mux-sensor-functioning.html"><i class="fa fa-check"></i><b>3</b> The MUX-sensor functioning</a><ul>
<li class="chapter" data-level="3.1" data-path="the-mux-sensor-functioning.html"><a href="the-mux-sensor-functioning.html#the-general-design-principles-for-the-mux"><i class="fa fa-check"></i><b>3.1</b> The general design principles for the MUX</a></li>
<li class="chapter" data-level="3.2" data-path="the-mux-sensor-functioning.html"><a href="the-mux-sensor-functioning.html#the-different-parts-of-the-mux-sensor-system"><i class="fa fa-check"></i><b>3.2</b> The different parts of the MUX-sensor system</a><ul>
<li class="chapter" data-level="3.2.1" data-path="the-mux-sensor-functioning.html"><a href="the-mux-sensor-functioning.html#sampling-ports-and-rinsing-solutions"><i class="fa fa-check"></i><b>3.2.1</b> Sampling ports and rinsing solutions</a></li>
<li class="chapter" data-level="3.2.2" data-path="the-mux-sensor-functioning.html"><a href="the-mux-sensor-functioning.html#flow-through-cuvette"><i class="fa fa-check"></i><b>3.2.2</b> Flow through cuvette</a></li>
<li class="chapter" data-level="3.2.3" data-path="the-mux-sensor-functioning.html"><a href="the-mux-sensor-functioning.html#post-cuvette-sample-spool"><i class="fa fa-check"></i><b>3.2.3</b> Post-cuvette sample spool</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="the-mux-sensor-functioning.html"><a href="the-mux-sensor-functioning.html#sampling-sequences"><i class="fa fa-check"></i><b>3.3</b> Sampling sequences</a><ul>
<li class="chapter" data-level="3.3.1" data-path="the-mux-sensor-functioning.html"><a href="the-mux-sensor-functioning.html#pump-and-measurement-times"><i class="fa fa-check"></i><b>3.3.1</b> Pump and measurement times</a></li>
<li class="chapter" data-level="3.3.2" data-path="the-mux-sensor-functioning.html"><a href="the-mux-sensor-functioning.html#purge-port-and-times"><i class="fa fa-check"></i><b>3.3.2</b> Purge port and times</a></li>
<li class="chapter" data-level="3.3.3" data-path="the-mux-sensor-functioning.html"><a href="the-mux-sensor-functioning.html#sampling-sequence-with-automatic-rinsing"><i class="fa fa-check"></i><b>3.3.3</b> Sampling sequence with automatic rinsing</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="the-mux-sensor-functioning.html"><a href="the-mux-sensor-functioning.html#sampling-cycle"><i class="fa fa-check"></i><b>3.4</b> Sampling cycle</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="programing-the-mux.html"><a href="programing-the-mux.html"><i class="fa fa-check"></i><b>4</b> Programing the MUX</a><ul>
<li class="chapter" data-level="4.1" data-path="programing-the-mux.html"><a href="programing-the-mux.html#the-sd-card-in-the-control-box"><i class="fa fa-check"></i><b>4.1</b> The SD card in the control box</a></li>
<li class="chapter" data-level="4.2" data-path="programing-the-mux.html"><a href="programing-the-mux.html#the-config.txt-file"><i class="fa fa-check"></i><b>4.2</b> The <em>config.txt</em> file</a><ul>
<li class="chapter" data-level="4.2.1" data-path="programing-the-mux.html"><a href="programing-the-mux.html#programming-the-mux-sampling-sequence-without-automatic-rinsing"><i class="fa fa-check"></i><b>4.2.1</b> Programming the MUX <em>sampling sequence</em> without automatic rinsing</a></li>
<li class="chapter" data-level="4.2.2" data-path="programing-the-mux.html"><a href="programing-the-mux.html#programming-the-mux-sampling-sequence-with-two-automatic-rinsing-and-a-waste-port"><i class="fa fa-check"></i><b>4.2.2</b> Programming the MUX <em>sampling sequence</em> with two automatic rinsing, and a waste port</a></li>
<li class="chapter" data-level="4.2.3" data-path="programing-the-mux.html"><a href="programing-the-mux.html#the-spectrolyser-values-in-the-config.txt-file"><i class="fa fa-check"></i><b>4.2.3</b> The Spectro::lyser values in the <em>config.txt</em> file</a></li>
<li class="chapter" data-level="4.2.4" data-path="programing-the-mux.html"><a href="programing-the-mux.html#delayed-start"><i class="fa fa-check"></i><b>4.2.4</b> Delayed start</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="programing-the-mux.html"><a href="programing-the-mux.html#examples-of-config.txt-files"><i class="fa fa-check"></i><b>4.3</b> Examples of <em>config.txt</em> files</a><ul>
<li class="chapter" data-level="4.3.1" data-path="programing-the-mux.html"><a href="programing-the-mux.html#sampling-cycles-with-no-rinsing"><i class="fa fa-check"></i><b>4.3.1</b> Sampling cycles with no rinsing</a></li>
<li class="chapter" data-level="4.3.2" data-path="programing-the-mux.html"><a href="programing-the-mux.html#sampling-cycles-with-one-rinse"><i class="fa fa-check"></i><b>4.3.2</b> Sampling cycles with one rinse</a></li>
<li class="chapter" data-level="4.3.3" data-path="programing-the-mux.html"><a href="programing-the-mux.html#sampling-cycles-with-one-rinse-1"><i class="fa fa-check"></i><b>4.3.3</b> Sampling cycles with one rinse</a></li>
<li class="chapter" data-level="4.3.4" data-path="programing-the-mux.html"><a href="programing-the-mux.html#sampling-cycles-with-one-rinse-2"><i class="fa fa-check"></i><b>4.3.4</b> Sampling cycles with one rinse</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="the-files-saved-on-the-sd-card.html"><a href="the-files-saved-on-the-sd-card.html"><i class="fa fa-check"></i><b>5</b> The files saved on the SD card</a><ul>
<li class="chapter" data-level="5.1" data-path="the-files-saved-on-the-sd-card.html"><a href="the-files-saved-on-the-sd-card.html#the-mux-log-files"><i class="fa fa-check"></i><b>5.1</b> The MUX log files</a><ul>
<li class="chapter" data-level="5.1.1" data-path="the-files-saved-on-the-sd-card.html"><a href="the-files-saved-on-the-sd-card.html#the-fingerprint-files"><i class="fa fa-check"></i><b>5.1.1</b> The fingerprint files</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="how-to-start.html"><a href="how-to-start.html"><i class="fa fa-check"></i><b>6</b> How to start</a><ul>
<li class="chapter" data-level="6.1" data-path="how-to-start.html"><a href="how-to-start.html#make-all-necessary-connections"><i class="fa fa-check"></i><b>6.1</b> Make all necessary connections</a></li>
<li class="chapter" data-level="6.2" data-path="how-to-start.html"><a href="how-to-start.html#ready-the-peristaltic-pump"><i class="fa fa-check"></i><b>6.2</b> Ready the peristaltic pump</a></li>
<li class="chapter" data-level="6.3" data-path="how-to-start.html"><a href="how-to-start.html#install-the-flow-through-cuvette"><i class="fa fa-check"></i><b>6.3</b> Install the flow through cuvette</a></li>
<li class="chapter" data-level="6.4" data-path="how-to-start.html"><a href="how-to-start.html#configure-the-spectrolyser-for-cuvette"><i class="fa fa-check"></i><b>6.4</b> Configure the Spectro::lyser for cuvette</a></li>
<li class="chapter" data-level="6.5" data-path="how-to-start.html"><a href="how-to-start.html#turn-the-mux-on"><i class="fa fa-check"></i><b>6.5</b> Turn the MUX on</a></li>
<li class="chapter" data-level="6.6" data-path="how-to-start.html"><a href="how-to-start.html#test-the-mux-in-the-lab"><i class="fa fa-check"></i><b>6.6</b> Test the MUX in the lab</a></li>
<li class="chapter" data-level="6.7" data-path="how-to-start.html"><a href="how-to-start.html#install-and-test-the-mux-in-the-field"><i class="fa fa-check"></i><b>6.7</b> Install and test the MUX in the field</a><ul>
<li class="chapter" data-level="6.7.1" data-path="how-to-start.html"><a href="how-to-start.html#install-all-hardware-to-length"><i class="fa fa-check"></i><b>6.7.1</b> Install all hardware to length</a></li>
<li class="chapter" data-level="6.7.2" data-path="how-to-start.html"><a href="how-to-start.html#use-manual-pumping-feature-to-obtain-you-pump-and-purge-times"><i class="fa fa-check"></i><b>6.7.2</b> Use manual pumping feature to obtain you pump and purge times</a></li>
<li class="chapter" data-level="6.7.3" data-path="how-to-start.html"><a href="how-to-start.html#manually-trigger-the-mux"><i class="fa fa-check"></i><b>6.7.3</b> Manually trigger the MUX</a></li>
<li class="chapter" data-level="6.7.4" data-path="how-to-start.html"><a href="how-to-start.html#change-clock"><i class="fa fa-check"></i><b>6.7.4</b> Change clock</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="trouble-shooting.html"><a href="trouble-shooting.html"><i class="fa fa-check"></i><b>7</b> Trouble Shooting</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">User Guide for the MUX</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="programing-the-mux" class="section level1">
<h1><span class="header-section-number">4</span> Programing the MUX</h1>
<div id="the-sd-card-in-the-control-box" class="section level2">
<h2><span class="header-section-number">4.1</span> The SD card in the control box</h2>
<p>All the instructions for programing the MUX are consigned in the <em>config.txt</em> file, itself located on the micro SD card. The SD card can be retrieved by opening the control box. One may use the macro SD card adapter provided to read the SD card on a computer (Figure <a href="programing-the-mux.html#fig:ControlBoxSDCard">4.1</a>).</p>
<div class="figure" style="text-align: center"><span id="fig:ControlBoxSDCard"></span>
<img src="pictures/ControlBoxSDCard.png" alt="Location of the SD card in the control box of the MUX" width="70%" />
<p class="caption">
Figure 4.1: Location of the SD card in the control box of the MUX
</p>
</div>
</div>
<div id="the-config.txt-file" class="section level2">
<h2><span class="header-section-number">4.2</span> The <em>config.txt</em> file</h2>
<p>All the instructions for the sampling sequences are provided in the <em>config.txt</em>. A typical basic <em>config.txt</em> file looks like in Figure <a href="programing-the-mux.html#fig:ConfigBasic">4.2</a> below. In this particular example, there are 12 valves activated in a <em>sampling cycle</em> ranked in increasing order from 1 to 12. The order of the valves can be completely interchanged and the <em>sampling cycle</em> will go followin the prescribed order.</p>
<div class="figure" style="text-align: left"><span id="fig:ConfigBasic"></span>
<img src="pictures/ConfigBasic.png" alt="Typical *config.txt* file where 12 ports are activated, with no automatic rinsing" width="60%" />
<p class="caption">
Figure 4.2: Typical <em>config.txt</em> file where 12 ports are activated, with no automatic rinsing
</p>
</div>
<div id="programming-the-mux-sampling-sequence-without-automatic-rinsing" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Programming the MUX <em>sampling sequence</em> without automatic rinsing</h3>
<p>The commands for the <em>sampling sequences</em> for each <em>sampling cycle</em> are given in the first 6 lines of the <em>config.txt</em> file (Figure <a href="programing-the-mux.html#fig:ConfigBasicMUXPart">4.3</a>). Each variable between <code>&lt;...&gt;</code> defines the name of the variable used in the program, and all numbers between <code>[...]</code> define the array of values to be used. The values in one array correspond to all the values necessary for a <em>sampling cycle</em>.</p>
<div class="figure" style="text-align: left"><span id="fig:ConfigBasicMUXPart"></span>
<img src="pictures/ConfigBasicMUXPart.png" alt="The commands for the MUX sampling sequence timing are provided in the first 6 lines of the *config.txt* (12 ports are activated, with no automatic rinsing)" width="60%" />
<p class="caption">
Figure 4.3: The commands for the MUX sampling sequence timing are provided in the first 6 lines of the <em>config.txt</em> (12 ports are activated, with no automatic rinsing)
</p>
</div>
<ul>
<li><code>&lt;VALVES PUMPING&gt;</code> defines the list and its order of the valves or port which will be activated during <em>pumping</em> of the <em>sampling cycles</em>. In the example of Figure <a href="programing-the-mux.html#fig:ConfigBasicMUXPart">4.3</a>, the <em>sampling cycles</em> inclues all valves from 1 to 12 in that order.</li>
<li><code>&lt;VALVES PURGING&gt;</code> defines the list and its order of the valves or port which will be activated during the <em>purging</em> phase of each <em>sampling sequence</em> of the <em>sampling cycle</em>. In the particular example of Figure <a href="programing-the-mux.html#fig:ConfigBasicMUXPart">4.3</a>, all water is purged back to <em>its source</em> as the same valve is used during <em>pumping</em> and <em>purging</em>.</li>
<li><code>&lt;PUMP TIMES&gt;</code> defines the array of values in seconds that will be used for the <em>pumping</em> in each <em>sampling sequence</em> corresponding to the <em>pumping</em> valve activated.</li>
<li><code>&lt;MEASUREMENT TIMES&gt;</code> defines the array of values in seconds that will be used for each <em>sampling sequence</em> and corresponding to the activated valve.</li>
<li><code>&lt;PURGE TIMES&gt;</code> defines the array of values in seconds that will be used for the <em>purping</em> in each <em>sampling sequence</em> corresponding to the <em>purging</em> valve activated.</li>
<li><code>&lt;STEPS&gt;[1]</code> means that there is no automatic rinsing. Technically, it defines the fact that the program will read each array and each cleaning signal will activate the next <code>[1]</code> (one) value in the array. In other words, the program will read the next value in the array to be used upon a <em>cleaning signal</em> (more details later).</li>
</ul>
<p>For illustration purposes, the text of the <em>config.txt</em> file have been colored. In the current example (Figure <a href="programing-the-mux.html#fig:ConfigBasicMUXPart">4.3</a>), in the <em>sampling cycle</em>, the first <em>sampling sequence</em> starts with pumping from valve 1 for 15 seconds, waits for 30 sec for the Spectro::lyser to do its measurement, then purge to through the same valve 1 for 17 seconds, i.e., 2 seconds more than pumping to remove as many drops as possible. Because the <code>&lt;STEPS&gt;</code> is set to 1, the MUX waits for the next Spectro::lyser <em>cleaning signal</em> to start its next <em>sampling sequence</em>.</p>
<p>By analogy, the 7<sup>th</sup> <em>sampling sequence</em> starts with pumping from valve 7 for 29 seconds, waits for 16 sec for the Spectro::lyser to do its measurement, then purge to through the same valve 7 for 31 seconds, i.e., 2 seconds more than pumping to remove as many drops as possible.</p>
<ul>
<li><p>Notice that for all activated valves, <code>&lt;PUMP TIMES&gt; + &lt;MEASUREMENT TIMES&gt;</code> is always equal to 45 seconds, and the 45 seconds corresponds to the longest <em>pumping time</em> (30 sec, corresponding to valve 6 in the example), plus 5 seconds of no pumping for all gas bubbles to settle, plus 9 seconds for the Spectro::lyser measurement to take place. The current setting suggests that the MUX would start its purging not even one second after the last beep of the Spectro::lyser measurement… That would work, but honestly there is advantage to do that. So adding several seconds more in the measurement timings would probably be more judicious and safer to make sure water is still in the cuvette for the full measurement.</p></li>
<li><p>Also notice that the <code>&lt;PUMP TIMES&gt; + &lt;MEASUREMENT TIMES&gt;</code> is equal to the <code>&lt;CLEAN WAIT&gt;</code> (Figure <a href="programing-the-mux.html#fig:ConfigBasic">4.2</a>) value minus 5 seconds corresponding to the minimum of time for bubbles to settle for the longest pumping time (more details below)</p></li>
</ul>
</div>
<div id="programming-the-mux-sampling-sequence-with-two-automatic-rinsing-and-a-waste-port" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Programming the MUX <em>sampling sequence</em> with two automatic rinsing, and a waste port</h3>
<p>The next example illustrates more complicated options. The user wants to use points 10, 1, 3, 8, 9, 2 in that order in a <em>sampling cycle</em> and wants to add an <em>air tracer measurement</em>. The user does not want to purge water back to the sampling point, but rather, wants to purge all water to a waste port, which incidently can be used for lab sampling purposes. The user also wants to use two automatic rinsing, the first one with acid where acid would stay in the cuvette for 55 seconds to leave enough reaction time, and the second one with DI to rinse the acid off.</p>
<p>The MUX could be programed as illustrated in Figure <a href="programing-the-mux.html#fig:Config2rinsesMUXPart">4.4</a> below.</p>
<div class="figure" style="text-align: left"><span id="fig:Config2rinsesMUXPart"></span>
<img src="pictures/Config2rinsesMUXPart.png" alt="Programing for 6 ports and an air measurement, purging to waste, and two automatic rinsing" width="80%" />
<p class="caption">
Figure 4.4: Programing for 6 ports and an air measurement, purging to waste, and two automatic rinsing
</p>
</div>
<ul>
<li>Notice that <code>&lt;STEPS&gt;</code> value is set to 3. This means that the MUX <em>sampling sequence</em> will be activated by the <em>cleaning signal</em> every 3 values of the arrays (the text in black in Figure <a href="programing-the-mux.html#fig:Config2rinsesMUXPart">4.4</a>). In between, the green and red values, are automatically activated during the <em>sampling sequence</em>, and correspond here to the two rinsing desired. The green values corresponds to the values for the acid rinse, and the red values correspond to the DI rinse.</li>
<li>The activated sampling ports (other than rinsing) of the <em>sampling cycle</em> are defined in the <code>&lt;VALVES PUMPING&gt;</code> array and appear in black in Figure <a href="programing-the-mux.html#fig:Config2rinsesMUXPart">4.4</a>. Their list is thus 10, 1, 3, 8, 9, 2, and 13. The last one, 13, corresponds to the waste port open to the atmosphere, which means that it can be used for ‘air tracer measurement’.</li>
<li>The port used for purging of the sampled points (other than rinsing) also appears in black in the <code>&lt;VALVES PURGING&gt;</code>
array, and is always 13.</li>
<li>The pump times, measurement times, and purge times for the sampled points are illustrated in black, respectively, in the <code>&lt;PUMP TIMES&gt;</code>, <code>&lt;MEASUREMENT TIMES&gt;</code>, and <code>&lt;PURGE TIMES&gt;</code> arrays (Figure <a href="programing-the-mux.html#fig:Config2rinsesMUXPart">4.4</a>)</li>
<li>The acid rinse will be pumped and purged from and to port 11 everytime. There often no need to purge acid to waste. Although, the low strength of the acid would not damage the environment, it is preferable to purge back to its bottle to save acid. The dilution by water droplets will not affect acid strength and anti-fouling efficacy.</li>
<li>To leave acid in the cuvette for 55 seconds, the user add 55 sec. in the <code>&lt;MEASUREMENT TIMES&gt;</code> array.</li>
<li>The DI water rinse is always pumps from port 12 in the example from a designated DI water jar. In the example, the DI water is purged to the waste port 13. This implies that a lrge enough DI water container be used to have enough between field service intervals.</li>
<li>The amount of time DI water stays in the cuvette does not matter as much as acid here and a value of 4 seconds has been chosen in the example.</li>
<li>During the air measurements, the pumping and purging times are kept to a minimum (2 sec.) to minimize energy spending and peristaltic pump wear. The measurement time (black value) is set to 43 seconds to stay in sequence with the other <em>sampling sequences</em> although it could have been shortened as well.</li>
</ul>
</div>
<div id="the-spectrolyser-values-in-the-config.txt-file" class="section level3">
<h3><span class="header-section-number">4.2.3</span> The Spectro::lyser values in the <em>config.txt</em> file</h3>
<p>The next five lines in the <em>config.txt</em> file give instructions to the Spectro::lyser on the values to use when going into the <em>logger mode</em> (Figure <a href="programing-the-mux.html#fig:ConfigScan">4.5</a>).</p>
<div class="figure" style="text-align: left"><span id="fig:ConfigScan"></span>
<img src="pictures/ConfigScan.png" alt="The parameters in the *config.txt* to pilot the Spectro::lyser" width="60%" />
<p class="caption">
Figure 4.5: The parameters in the <em>config.txt</em> to pilot the Spectro::lyser
</p>
</div>
<ul>
<li><code>&lt;LOG INT&gt;</code> defines the interval in seconds, at which the Spectro::lyser will take a measurement and logs its value. It also corresponds to the interval at which the Spectro::lyser sends a <em>cleaning signal</em>, which in the end corresponds at the time interval between two <em>sampling sequences</em>. The time interval on each sampled point will be the recurring interval of a <em>sampling cycle</em>.</li>
<li><code>&lt;CLEAN INT&gt;</code> defines the number of <em>logging intervals</em> or measurements from the Spectro::lyser there are before it sends a <em>cleaning signal</em>. This does not apply to our use, as we want to have a <em>cleaning signal</em> sent everytime the Spectro::lyser takes a measurement. ALWAYS set it to 1.</li>
<li><code>&lt;CLEAN DUR&gt;</code> defines the number of seconds the 12V cleaning signal coming from the Spectro::lyser is on.</li>
<li><code>&lt;CLEAN WAIT&gt;</code> defines the number of seconds between the beginning of the <em>cleaning signal</em> and the first beep of the Spectro::lyser measurement. <strong>The duration of this value is linked to the <em>pumping times</em>, and must be equal, at least, to the <em>longest</em> pumping time of the <em>sampling cycle</em>, plus 5 seconds to leave time for air bubbles to settle</strong>.</li>
<li><code>&lt;MUX ON&gt;</code> has to be set at 1. It corresponds to a feature obsolete with the current version of MUX.
<code>&lt;AUTORESET&gt;</code> this option defines whether the user wants the system to autorest at midnight everyday. We recommend to use this option (set to [1]), as it allows the MUX to clean up its memory. If the user prefers not to use this option, then set to [0].</li>
</ul>
</div>
<div id="delayed-start" class="section level3">
<h3><span class="header-section-number">4.2.4</span> Delayed start</h3>
<p>In many situations, it might be of advantage not to start sampling when the users are in the field, but rather start at a later time. Similarly, the user might want to stop the system before being able to come to the field to retrieve data. This what the delayed start and end are for. If the user does not want the delayed start and end, set <code>&lt;DELAYED START&gt;</code> and <code>&lt;DELAYED END&gt;</code> to [0].</p>
<p>When the user wants a delayed start, set <strong>both</strong> <code>&lt;DELAYED START&gt;</code> and <code>&lt;DELAYED END&gt;</code> to [1]. The start time is defined in <code>&lt;START TIME&gt;</code> as [YY,MM,DD,HH,mm,SS]. When the user does not want the system to end until the next field visit, set the <code>&lt;END TIME&gt;</code> to several years later. An example is given below in Figure <a href="programing-the-mux.html#fig:ConfigDelay">4.6</a>.</p>
<div class="figure" style="text-align: left"><span id="fig:ConfigDelay"></span>
<img src="pictures/ConfigDelay.png" alt="Example of delayed start on the *config.txt* file" width="50%" />
<p class="caption">
Figure 4.6: Example of delayed start on the <em>config.txt</em> file
</p>
</div>
</div>
</div>
<div id="examples-of-config.txt-files" class="section level2">
<h2><span class="header-section-number">4.3</span> Examples of <em>config.txt</em> files</h2>
<p><strong>Always make sure that there is the arrays in the <code>&lt;VALVES PUMPING&gt;</code>, <code>&lt;VALVES PURGING&gt;</code>, <code>&lt;PUMP TIMES&gt;</code>, <code>&lt;MEASUREMENT TIMES&gt;</code>, and <code>&lt;PURGE TIMES&gt;</code> all have the same number of values!!!</strong></p>
<div id="sampling-cycles-with-no-rinsing" class="section level3">
<h3><span class="header-section-number">4.3.1</span> Sampling cycles with no rinsing</h3>
<ul>
<li>12 sampling ports in 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12 order.</li>
<li>same purging ports</li>
<li>Five minutes <em>sampling sequence</em> intervals</li>
<li>60 time resolution for each sampled point</li>
</ul>
<pre><code>&lt;VALVES PUMPING&gt;[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
&lt;VALVES PURGING&gt;[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
&lt;PUMP TIMES&gt;[15, 20, 25, 22, 21, 30, 29, 26, 23, 28, 16, 17]
&lt;MEASUREMENT TIMES&gt;[30, 25, 20, 23, 24, 15, 16, 19, 22, 17, 29, 28]
&lt;PURGE TIMES&gt;[17, 22, 27, 24, 23, 32, 31, 28, 25, 30, 18, 19]
&lt;STEPS&gt;[1]
&lt;LOG INT&gt;[150]
&lt;CLEAN INT&gt;[1]
&lt;CLEAN DUR&gt;[5]
&lt;CLEAN WAIT&gt;[35]
&lt;MUX ON&gt;[1]
&lt;AUTORESET&gt;[1]
&lt;DELAYED START&gt;[0]
&lt;START TIME&gt;[19, 07, 05, 13, 32, 00]
&lt;DELAYED END&gt;[0]
&lt;END TIME&gt;[19, 07, 05, 13, 37, 00]</code></pre>
</div>
<div id="sampling-cycles-with-one-rinse" class="section level3">
<h3><span class="header-section-number">4.3.2</span> Sampling cycles with one rinse</h3>
<ul>
<li>4 sampling ports in 1, 3, 5, 7 order, no tracer measurement (not recommended)</li>
<li>one automatic (e.g., DI water) rinse on port 2</li>
<li>same purging ports</li>
<li>Three minutes <em>sampling sequence</em> intervals</li>
<li>12 time resolution for each sampled point</li>
</ul>
<pre><code>&lt;VALVES PUMPING&gt;[1, 2, 3, 2, 5, 2, 7, 2]
&lt;VALVES PURGING&gt;[1, 2, 3, 2, 5, 2, 7, 2]
&lt;PUMP TIMES&gt;[10, 5,10, 5,10, 5,10, 5]
&lt;MEASUREMENT TIMES&gt;[12, 3, 12, 3, 12, 3, 12, 3]
&lt;PURGE TIMES&gt;[10, 3, 10, 3, 10, 3, 10, 3]
&lt;STEPS&gt;[2]
&lt;LOG INT&gt;[180]
&lt;CLEAN INT&gt;[1]
&lt;CLEAN DUR&gt;[5]
&lt;CLEAN WAIT&gt;[12]
&lt;MUX ON&gt;[1]
&lt;AUTORESET&gt;[1]
&lt;DELAYED START&gt;[0]
&lt;START TIME&gt;[19, 07, 06, 06, 08, 00]
&lt;DELAYED END&gt;[0]
&lt;END TIME&gt;[19, 07, 06, 13, 37, 00]</code></pre>
</div>
<div id="sampling-cycles-with-one-rinse-1" class="section level3">
<h3><span class="header-section-number">4.3.3</span> Sampling cycles with one rinse</h3>
<ul>
<li>4 sampling ports in 1, 3, 5, 7 order, one air tracer measurement (recommended)</li>
<li>one automatic (e.g., DI water) rinse on port 2</li>
<li>All purging on port 13</li>
<li>Three minutes <em>sampling sequence</em> intervals</li>
<li>15 time resolution for each sampled point</li>
</ul>
<pre><code>&lt;VALVES PUMPING&gt;[1, 2, 3, 2, 5, 2, 7, 2, 13, 2]
&lt;VALVES PURGING&gt;[13, 2, 13, 2, 13, 2, 13, 2, 13, 2]
&lt;PUMP TIMES&gt;[10, 5,10, 5,10, 5,10, 5, 2, 2]
&lt;MEASUREMENT TIMES&gt;[12, 3, 12, 3, 12, 3, 12, 3, 2, 2]
&lt;PURGE TIMES&gt;[10, 3, 10, 3, 10, 3, 10, 3, 2, 2]
&lt;STEPS&gt;[2]
&lt;LOG INT&gt;[180]
&lt;CLEAN INT&gt;[1]
&lt;CLEAN DUR&gt;[5]
&lt;CLEAN WAIT&gt;[12]
&lt;MUX ON&gt;[1]
&lt;AUTORESET&gt;[1]
&lt;DELAYED START&gt;[0]
&lt;START TIME&gt;[19, 07, 06, 06, 08, 00]
&lt;DELAYED END&gt;[0]
&lt;END TIME&gt;[19, 07, 06, 13, 37, 00]</code></pre>
</div>
<div id="sampling-cycles-with-one-rinse-2" class="section level3">
<h3><span class="header-section-number">4.3.4</span> Sampling cycles with one rinse</h3>
<ul>
<li>4 sampling ports in 10, 1, 3, 8, 9, 2, and one air (13) tracer measurement (recommended)</li>
<li>two automatic, e.g., acid or port 11, followed by DI water rinse on port 12</li>
<li>All purging on port 13, but for acid back to port 11</li>
<li>Because of the two rinses, the interval between two <em>sampling sequences</em> has to be a bit longer, in fact longer than the summation of the (pumping time + measurement time), the acid (pumping, stay in cuvette, purging) times, and the DI water (pumping, stay in cuvette, purging) times. That sum is equal to 164 seconds. So technically, one could set the log interval to 180 seconds. However, in practice, this would mean that the MUX would be pumping and purging a lot of the time, drawing lots of power and wearing out the peristaltic pump tubing. The user must also assess whether 30 min or hourly data is in fact plenty enough.</li>
<li>Five minutes <em>sampling sequence</em> intervals</li>
<li>35 time resolution for each sampled point</li>
</ul>
<pre><code>&lt;VALVES PUMPING&gt;[10, 11, 12, 1, 11, 12, 3, 11, 12, 8, 11, 12, 9, 11, 12, 2, 11, 12, 13, 11, 12]
&lt;VALVES PURGING&gt;[13, 11, 13, 13, 11, 13, 13, 11, 13, 13, 11, 13, 13, 11, 13, 13, 11, 13 , 13, 11, 12]
&lt;PUMP TIMES&gt;[28, 14, 14, 15, 14, 14, 25, 14, 14, 26, 14, 14, 23, 14, 14, 20, 14, 14, 2, 2, 2]
&lt;MEASUREMENT TIMES&gt;[17, 55, 4, 30, 55, 4, 20, 55, 4, 19, 55, 4, 22, 55, 4, 25, 55, 4 , 43, 2, 2]
&lt;PURGE TIMES&gt;[29, 17, 16, 1, 17, 16, 3, 17, 16, 8, 17, 16, 9, 17, 16, 2, 17, 16 , 20, 14, 14 , 2, 4, 4]
&lt;STEPS&gt;[3]
&lt;LOG INT&gt;[300]
&lt;CLEAN INT&gt;[1]
&lt;CLEAN DUR&gt;[5]
&lt;CLEAN WAIT&gt;[33]
&lt;MUX ON&gt;[1]
&lt;AUTORESET&gt;[1]
&lt;DELAYED START&gt;[0]
&lt;START TIME&gt;[19, 07, 06, 06, 08, 00]
&lt;DELAYED END&gt;[0]
&lt;END TIME&gt;[19, 07, 06, 13, 37, 00]
</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="the-mux-sensor-functioning.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="the-files-saved-on-the-sd-card.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03-programing-the-MUX.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["MUXManual.pdf", "MUXManual.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
